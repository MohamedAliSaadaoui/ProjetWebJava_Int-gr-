{% extends 'base.html.twig' %}

{% block title %}{{ article.title }}{% endblock %}

{% block body %}
    <div class="container my-5">
        <div class="card shadow-lg p-4 bg-white rounded">
            <!-- Titre de l'article -->
            <h1 class="text-primary text-center">{{ article.title }}</h1>
            
            <!-- Date de publication -->
            <p class="text-muted text-center"><em>Publi√© le {{ article.date|date('d-m-Y') }}</em></p>
            
            <!-- Contenu de l'article -->
            <div class="article-content border-bottom pb-3 mb-4">
                <p class="fs-5">{{ article.content }}</p>
            </div>

            <!-- Section des commentaires -->
            <section class="commentaires-section">
                <h3 class="text-secondary">üí¨ Commentaires</h3>

                <div class="commentaires list-group">

                    {% for commentaire in article.commentaires %}
                    
                        <div class="list-group-item bg-light border-0 shadow-sm rounded mb-2">
                            <p class="mb-1">{{ commentaire.contenuComm }}</p>
                            <p class="text-muted small">üïí Publi√© le {{ commentaire.dateComm|date('d-m-Y H:i') }}</p>

                            

                <i class="fas fa-trash-alt"></i> Supprimer </button>
                        </div>
                    {% else %}
                        <p class="text-muted">Aucun commentaire pour cet article.</p>
                    {% endfor %}
                </div>
            </section>

            <!-- Formulaire d'ajout de commentaire -->
            <section class="mt-4 p-3 bg-light rounded">
                <h3 class="text-secondary">üìù Ajouter un commentaire</h3>

                {{ form_start(commentaireForm, {'attr': {'class': 'form-group', 'novalidate': 'novalidate'}}) }}

                    <!-- Affichage des erreurs g√©n√©rales du formulaire -->
                    {{ form_errors(commentaireForm) }}

                    <!-- Champ pour le contenu du commentaire -->
                    <div class="mb-3">
                        {{ form_label(commentaireForm.contenuComm, 'Votre commentaire', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                        {{ form_widget(commentaireForm.contenuComm, {
                            'attr': {
                                'class': 'form-control border-primary shadow-sm',
                                'placeholder': '√âcrivez votre commentaire ici...',
                                'rows': '3',
                                'style': 'resize: none;'
                            }
                        }) }}
                        {{ form_errors(commentaireForm.contenuComm) }}
                    </div>

                    <!-- Bouton de soumission -->
                    <div class="text-end">
                        <button type="submit" class="btn btn-primary px-4 py-2 rounded-pill shadow-sm">
                            <i class="fas fa-paper-plane"></i> Publier
                        </button>
                    </div>

                {{ form_end(commentaireForm) }}
            </section>
            
            <div class="text-center mt-4">
                <a href="{{ path('app_blog') }}" class="btn btn-outline-secondary">
                    ‚¨Ö Retour √† la liste des articles
                </a>
            </div>
        </div>
    </div>
{% endblock %}
